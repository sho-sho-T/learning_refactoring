# オブジェクトによるプリミティブの置き換え

## 例

```typeScript

orders.filter(o => "high" === o.priority || "rush" === o.priority);

```

**⇩**

```typeScript

orders.filter(o => o.priority.higherThan(new Priority("normal")))

```

## 動機

開発の初期段階では、情報を見たままの数値や文字列といったデータ項目で表現してしまいがち。

開発が進むにつれて単純な項目でなくなってくる。

↑

この手のロジックはコードベース内で急速に重複していく傾向がある。

**単純な表示以上のことをする必要があるとわかったならすぐに、ちょっとしたデータでも新たなクラスにしてしまおう**

クラスがあれば必要に応じて固有の振る舞いを追加できる。

## 手順

### ① 「変数のカプセル化」ができていないなら施す

### ② データ値のための単純な値クラスを作る。既存の値をコンストラクタで受け取り、値を返す getter を用意する

### ③ 静的チェックを実行する

### ④ 値クラスのインスタンスを作るように setter を変更し、インスタンスのフィールドに値を格納するようにする。必要に応じてその方を変える

### ⑤ getter を変更し、値クラスの getter の呼び出し結果を返すようにする

### ⑥ テストする

### ⑦ 処理内容がよりわかるように、元のアクセサに「関数名の変更」の適用を検討する

### ⑧ 新たなオブジェクトの役割が値オブジェクトなのか参照オブジェクトなのかを明確にすることを検討する。検討の結果、値オブジェクトにするなら「参照から値への変更」をと検討する。参照オブジェクトにするなら「値から参照への変更」を施す。

### ⑨
